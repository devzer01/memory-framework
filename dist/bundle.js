function trace(e){console.log(e)}function isChrome(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}function isIOS(){var e=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];for(-1!==navigator.userAgent.toLowerCase().indexOf("iphone")&&(s_bIsIphone=!0);e.length;)if(navigator.platform===e.pop())return!0;return s_bIsIphone=!1,!1}function getSize(e){var t,i=e.toLowerCase(),n=window.document,a=n.documentElement;if(void 0===window["inner"+e])t=a["client"+e];else if(window["inner"+e]!=a["client"+e]){var s=n.createElement("body");s.id="vpw-test-b",s.style.cssText="overflow:scroll";var o=n.createElement("div");o.id="vpw-test-d",o.style.cssText="position:absolute;top:-1000px",o.innerHTML="<style>@media("+i+":"+a["client"+e]+"px){body#vpw-test-b div#vpw-test-d{"+i+":7px!important}}</style>",s.appendChild(o),a.insertBefore(s,n.head),t=7==o["offset"+e]?a["client"+e]:window["inner"+e],a.removeChild(s)}else t=window["inner"+e];return t}function onOrientationChange(){window.matchMedia("(orientation: portrait)").matches&&sizeHandler(),window.matchMedia("(orientation: landscape)").matches&&sizeHandler()}function getIOSWindowHeight(){var e=document.documentElement.clientWidth/window.innerWidth;return window.innerHeight*e}function getHeightOfIOSToolbars(){var e=(0===window.orientation?screen.height:screen.width)-getIOSWindowHeight();return e>1?e:0}function sizeHandler(){if(window.scrollTo(0,1),$("#canvas")){var e;e=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?getIOSWindowHeight():getSize("Height");var t=getSize("Width");_checkOrientation(t,e);var i=Math.min(e/CANVAS_HEIGHT,t/CANVAS_WIDTH),n=CANVAS_WIDTH*i,a=CANVAS_HEIGHT*i,s=0;a<e?(a+=s=e-a,n+=s*(CANVAS_WIDTH/CANVAS_HEIGHT)):n<t&&(n+=s=t-n,a+=s*(CANVAS_HEIGHT/CANVAS_WIDTH));var o=e/2-a/2,r=t/2-n/2,l=CANVAS_WIDTH/n;if((r*l<-EDGEBOARD_X||o*l<-EDGEBOARD_Y)&&(i=Math.min(e/(CANVAS_HEIGHT-2*EDGEBOARD_Y),t/(CANVAS_WIDTH-2*EDGEBOARD_X)),o=(e-(a=CANVAS_HEIGHT*i))/2,r=(t-(n=CANVAS_WIDTH*i))/2,l=CANVAS_WIDTH/n),s_iOffsetX=-1*r*l,s_iOffsetY=-1*o*l,o>=0&&(s_iOffsetY=0),r>=0&&(s_iOffsetX=0),null!==s_oInterface&&s_oInterface.refreshButtonPos(s_iOffsetX,s_iOffsetY),null!==s_oMenu&&s_oMenu.refreshButtonPos(s_iOffsetX,s_iOffsetY),s_bIsIphone){canvas=document.getElementById("canvas"),s_oStage.canvas.width=2*n,s_oStage.canvas.height=2*a,canvas.style.width=n+"px",canvas.style.height=a+"px";var c=Math.min(n/CANVAS_WIDTH,a/CANVAS_HEIGHT);s_oStage.scaleX=s_oStage.scaleY=2*c}else s_bMobile||isChrome()?($("#canvas").css("width",n+"px"),$("#canvas").css("height",a+"px")):(s_oStage.canvas.width=n,s_oStage.canvas.height=a,s_iScaleFactor=Math.min(n/CANVAS_WIDTH,a/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor);o<0?$("#canvas").css("top",o+"px"):$("#canvas").css("top","0px"),$("#canvas").css("left",r+"px")}}function _checkOrientation(e,t){s_bMobile&&ENABLE_CHECK_ORIENTATION&&(e>t?"landscape"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),s_oMain.stopUpdate()):"portrait"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),s_oMain.stopUpdate()))}function inIframe(){try{return window.self!==window.top}catch(e){return!0}}function createBitmap(e,t,i){var n=new createjs.Bitmap(e),a=new createjs.Shape;return t&&i?a.graphics.beginFill("#fff").drawRect(0,0,t,i):a.graphics.beginFill("#ff0").drawRect(0,0,e.width,e.height),n.hitArea=a,n}function createSprite(e,t,i,n,a,s){if(null!==t)o=new createjs.Sprite(e,t);else var o=new createjs.Sprite(e);var r=new createjs.Shape;return r.graphics.beginFill("#000000").drawRect(-i,-n,a,s),o.hitArea=r,o}function randomFloatBetween(e,t,i){return void 0===i&&(i=2),parseFloat(Math.min(e+Math.random()*(t-e),t).toFixed(i))}function shuffle(e){for(var t,i,n=e.length;0!==n;)i=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[i],e[i]=t;return e}function bubbleSort(e){var t;do{t=!1;for(var i=0;i<e.length-1;i++)if(e[i]>e[i+1]){var n=e[i];e[i]=e[i+1],e[i+1]=n,t=!0}}while(t)}function compare(e,t){return e.index>t.index?-1:e.index<t.index?1:0}function formatTime(e){e/=1e3;var t=Math.floor(e/60),i=Math.floor(e-60*t),n="";return n+=t<10?"0"+t+":":t+":",n+=i<10?"0"+i:i}function NoClickDelay(e){this.element=e,window.Touch&&this.element.addEventListener("touchstart",this,!1)}function shuffle(e){for(var t,i,n=e.length;n>0;)i=Math.floor(Math.random()*n),t=e[--n],e[n]=e[i],e[i]=t;return e}function playSound(e,t,i){return!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(null!==e.match(/^right/)&&(e="right"+Math.floor(3*Math.random()+1)),s_aSounds[e].play(),s_aSounds[e].volume(t),s_aSounds[e].loop(i),s_aSounds[e]):null}function stopSound(e){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[e].stop()}function setVolume(e,t){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[e].volume(t)}function setMute(e,t){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[e].mute(t)}function ctlArcadeResume(){null!==s_oMain&&s_oMain.startUpdate()}function ctlArcadePause(){null!==s_oMain&&s_oMain.stopUpdate()}function getParamValue(e){for(var t=window.location.search.substring(1).split("&"),i=0;i<t.length;i++){var n=t[i].split("=");if(n[0]==e)return n[1]}}function CSpriteLibrary(){var e,t,i,n,a,s;this.init=function(o,r,l){t=0,i=0,n=o,a=r,s=l,e={}},this.addSprite=function(i,n){e.hasOwnProperty(i)||(e[i]={szPath:n,oSprite:new Image},t++)},this.getSprite=function(t){return e.hasOwnProperty(t)?e[t].oSprite:null},this._onSpritesLoaded=function(){a.call(s)},this._onSpriteLoaded=function(){n.call(s),++i===t&&this._onSpritesLoaded()},this.loadSprites=function(){for(var t in e)e[t].oSprite.oSpriteLibrary=this,e[t].oSprite.onload=function(){this.oSpriteLibrary._onSpriteLoaded()},e[t].oSprite.src=e[t].szPath},this.getNumSprites=function(){return t}}function CPreloader(){var e,t,i,n,a,s,o;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this),s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.png"),s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png"),s_oSpriteLibrary.loadSprites(),o=new createjs.Container,s_oStage.addChild(o)},this.unload=function(){o.removeAllChildren()},this.hide=function(){var e=this;setTimeout(function(){createjs.Tween.get(s).to({alpha:1},500).call(function(){e.unload(),s_oMain.gotoMenu()})},1e3)},this._onImagesLoaded=function(){},this._onAllImagesLoaded=function(){this.attachSprites(),s_oMain.preloaderReady()},this.attachSprites=function(){var r=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));o.addChild(r);var l=s_oSpriteLibrary.getSprite("progress_bar");(n=createBitmap(l)).x=CANVAS_WIDTH/2-l.width/2,n.y=CANVAS_HEIGHT-210,o.addChild(n),e=l.width,t=l.height,(a=new createjs.Shape).graphics.beginFill("rgba(255,255,255,0.01)").drawRect(n.x,n.y,1,t),o.addChild(a),n.mask=a,(i=new createjs.Text("","30px "+FONT_GAME,"#fff")).x=CANVAS_WIDTH/2,i.y=CANVAS_HEIGHT-210,i.shadow=new createjs.Shadow("#000",2,2,2),i.textBaseline="alphabetic",i.textAlign="center",o.addChild(i),(s=new createjs.Shape).graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT),s.alpha=0,o.addChild(s)},this.refreshLoader=function(s){i.text=s+"%",a.graphics.clear();var o=Math.floor(s*e/100);a.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(n.x,n.y,o,t)},this._init()}function CMain(e){var t,i,n,a,s,o,r=0,l=0,c=STATE_LOADING;this.initContainer=function(){s_oStage=new createjs.Stage("canvas"),createjs.Touch.enable(s_oStage),!1===(s_bMobile=jQuery.browser.mobile)?s_oStage.enableMouseOver(20):navigator.userAgent.match(/android/i)&&(window.location.href="https://play.google.com/store/apps/details?id=lk.pituwa.memory"),s_iPrevTime=(new Date).getTime(),createjs.Ticker.setFPS(30),createjs.Ticker.addEventListener("tick",this._update),navigator.userAgent.match(/Windows Phone/i)&&(DISABLE_SOUND_MOBILE=!0),s_oSpriteLibrary=new CSpriteLibrary,n=new CPreloader,t=!0},this.soundLoaded=function(){r++;var e=Math.floor(r/l*100);n.refreshLoader(e),r===l&&(n.unload(),this.gotoMenu())},this._initSounds=function(){var e=new Array;e.push({path:"./sounds/",filename:"card",loop:!1,volume:1,ingamename:"card"}),e.push({path:"./sounds/",filename:"next_level",loop:!1,volume:1,ingamename:"next_level"}),e.push({path:"./sounds/",filename:"game_over",loop:!1,volume:1,ingamename:"game_over"}),e.push({path:"./sounds/",filename:"win",loop:!1,volume:1,ingamename:"win"}),e.push({path:"./sounds/",filename:"right1",loop:!1,volume:1,ingamename:"right1"}),e.push({path:"./sounds/",filename:"right2",loop:!1,volume:1,ingamename:"right2"}),e.push({path:"./sounds/",filename:"right3",loop:!1,volume:1,ingamename:"right3"}),e.push({path:"./sounds/",filename:"click",loop:!1,volume:1,ingamename:"click"}),l+=e.length,s_aSounds=new Array;for(var t=0;t<e.length;t++)s_aSounds[e[t].ingamename]=new Howl({src:[e[t].path+e[t].filename+".mp3",e[t].path+e[t].filename+".ogg"],autoplay:!1,preload:!0,loop:e[t].loop,volume:e[t].volume,onload:s_oMain.soundLoaded()})},this._loadImages=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this),s_oSpriteLibrary.addSprite("but_menu_bg","./sprites/but_menu_bg.png"),s_oSpriteLibrary.addSprite("player_name","./sprites/player-name.png"),s_oSpriteLibrary.addSprite("score_bg","./sprites/score-bg.png"),s_oSpriteLibrary.addSprite("but_exit","./sprites/but_exit.png"),s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg"),s_oSpriteLibrary.addSprite("audio_icon","./sprites/audio_icon.png"),s_oSpriteLibrary.addSprite("playStore","./sprites/play.png"),s_oSpriteLibrary.addSprite("bg_1","./sprites/bg_1.jpg"),s_oSpriteLibrary.addSprite("bg_2","./sprites/bg_2.jpg"),s_oSpriteLibrary.addSprite("bg_3","./sprites/bg_3.jpg"),s_oSpriteLibrary.addSprite("bg_4","./sprites/bg_4.jpg"),s_oSpriteLibrary.addSprite("bg_5","./sprites/bg_5.jpg"),s_oSpriteLibrary.addSprite("bg_6","./sprites/bg_6.jpg"),s_oSpriteLibrary.addSprite("bg_7","./sprites/bg_7.jpg"),s_oSpriteLibrary.addSprite("bg_8","./sprites/bg_8.jpg"),s_oSpriteLibrary.addSprite("card_spritesheet","./sprites/card_spritesheet.png"),s_oSpriteLibrary.addSprite("card_lk","./sprites/card_lk.png"),s_oSpriteLibrary.addSprite("card_pk","./sprites/card_pk.png"),s_oSpriteLibrary.addSprite("card_all","./sprites/card_all.png"),s_oSpriteLibrary.addSprite("msg_box","./sprites/msg_box.png"),s_oSpriteLibrary.addSprite("but_fullscreen","./sprites/but_fullscreen.png"),s_oSpriteLibrary.addSprite("but_credits","./sprites/but_credits.png"),s_oSpriteLibrary.addSprite("logo_ctl","./sprites/logo_ctl.png"),l+=s_oSpriteLibrary.getNumSprites(),s_oSpriteLibrary.loadSprites()},this._onImagesLoaded=function(){r++;var e=Math.floor(r/l*100);n.refreshLoader(e),r===l&&(n.unload(),this.gotoMenu())},this._onAllImagesLoaded=function(){},this.onAllPreloaderImagesLoaded=function(){this._loadImages()},this.preloaderReady=function(){this._loadImages(),!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||this._initSounds(),t=!0},this.gotoMenu=function(){a=new CMenu,c=STATE_MENU},this.gotoGame=function(){o=new CGame(i),c=STATE_GAME},this.gotoHelp=function(){s=new CHelp,c=STATE_HELP},this.stopUpdate=function(){t=!1,createjs.Ticker.paused=!0,$("#block_game").css("display","block"),!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||Howler.mute(!0)},this.startUpdate=function(){s_iPrevTime=(new Date).getTime(),t=!0,createjs.Ticker.paused=!1,$("#block_game").css("display","none"),!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_bAudioActive&&Howler.mute(!1)},this._update=function(e){if(!1!==t){var i=(new Date).getTime();s_iTimeElaps=i-s_iPrevTime,s_iCntFps++,s_iPrevTime=i,(s_iCntTime+=s_iTimeElaps)>=1e3&&(s_iCurFps=s_iCntFps,s_iCntTime-=1e3,s_iCntFps=0),c===STATE_GAME&&o.update(),s_oStage.update(e)}},s_oMain=this,i=e,ENABLE_CHECK_ORIENTATION=e.check_orientation,this.initContainer()}function CTextButton(e,t,i,n,a,s,o,r){var l,c,d,_,h,u,p,S,g,f=1;return this._init=function(e,t,i,n,a,s,o,r){l=!1,_=new Array,h=new Array,g=r,p=createBitmap(i),c=i.width,d=i.height;var f=(S=new createjs.Text(n,o+"px "+a,s)).getBounds();S.textAlign="left",S.textBaseline="alphabetic",S.x=20,S.shadow=new createjs.Shadow("#000000",5,5,10),S.y=Math.floor(i.height/2)+f.height/3,(u=new createjs.Container).x=e,u.y=t,u.regX=i.width/2,u.regY=i.height/2,u.addChild(p,S,S),g.addChild(u),this._initListener()},this.unload=function(){u.off("mousedown"),u.off("pressup"),g.removeChild(u)},this.setVisible=function(e){u.visible=e},this.setScale=function(e){u.scaleX=u.scaleY=e,f=e},this.enable=function(){l=!1,p.filters=[],p.cache(0,0,c,d)},this.disable=function(){l=!0;var e=(new createjs.ColorMatrix).adjustSaturation(-100);p.filters=[new createjs.ColorMatrixFilter(e)],p.cache(0,0,c,d)},this._initListener=function(){oParent=this,u.on("mousedown",this.buttonDown),u.on("pressup",this.buttonRelease)},this.addEventListener=function(e,t,i){_[e]=t,h[e]=i},this.buttonRelease=function(){l||(u.scaleX=f,u.scaleY=f,_[ON_MOUSE_UP]&&_[ON_MOUSE_UP].call(h[ON_MOUSE_UP]))},this.buttonDown=function(){l||(playSound("click",1,!1),u.scaleX=u.scaleY=f-.1*f,_[ON_MOUSE_DOWN]&&_[ON_MOUSE_DOWN].call(h[ON_MOUSE_DOWN]))},this.setPosition=function(e,t){u.x=e,u.y=t},this.changeText=function(e){S.text=e,(void 0).text=e},this.setX=function(e){u.x=e},this.setY=function(e){u.y=e},this.getButtonImage=function(){return u},this.getX=function(){return u.x},this.getY=function(){return u.y},this._init(e,t,i,n,a,s,o,r),this}function CGfxButton(e,t,i,n){var a,s,o,r,l,c,d;return this._init=function(e,t,i,n){a=!1,s=1,o=new Array,r=new Array,(l=createBitmap(i)).x=e,l.y=t,l.scaleX=l.scaleY=s,l.regX=i.width/2,l.regY=i.height/2,l.cursor="pointer",n.addChild(l),this._initListener()},this.unload=function(){s_bMobile?(l.off("mousedown",this.buttonDown),l.off("pressup",this.buttonRelease)):(l.off("mousedown",this.buttonDown),l.off("mouseover",this.buttonOver),l.off("pressup",this.buttonRelease)),n.removeChild(l)},this.setVisible=function(e){l.visible=e},this.setClickable=function(e){a=!e},this._initListener=function(){s_bMobile?(l.on("mousedown",this.buttonDown),l.on("pressup",this.buttonRelease)):(l.on("mousedown",this.buttonDown),l.on("mouseover",this.buttonOver),l.on("pressup",this.buttonRelease))},this.addEventListener=function(e,t,i){o[e]=t,r[e]=i},this.buttonRelease=function(){a||(l.scaleX=s,l.scaleY=s,o[ON_MOUSE_UP]&&o[ON_MOUSE_UP].call(r[ON_MOUSE_UP]))},this.buttonDown=function(){a||(l.scaleX=.9*s,l.scaleY=.9*s,playSound("click",1,!1),o[ON_MOUSE_DOWN]&&o[ON_MOUSE_DOWN].call(r[ON_MOUSE_DOWN]))},this.buttonOver=function(e){if(!s_bMobile){if(a)return;e.target.cursor="pointer"}},this.pulseAnimation=function(){c=createjs.Tween.get(l).to({scaleX:.9*s,scaleY:.9*s},850,createjs.Ease.quadOut).to({scaleX:s,scaleY:s},650,createjs.Ease.quadIn).call(function(){d.pulseAnimation()})},this.trembleAnimation=function(){c=createjs.Tween.get(l).to({rotation:5},75,createjs.Ease.quadOut).to({rotation:-5},140,createjs.Ease.quadIn).to({rotation:0},75,createjs.Ease.quadIn).wait(750).call(function(){d.trebleAnimation()})},this.setPosition=function(e,t){l.x=e,l.y=t},this.setX=function(e){l.x=e},this.setY=function(e){l.y=e},this.getButtonImage=function(){return l},this.getX=function(){return l.x},this.getY=function(){return l.y},d=this,this._init(e,t,i,n),this}function CToggle(e,t,i,n,a){var s,o,r,l,c;this._init=function(e,t,i,n){o=new Array,r=new Array;var a={images:[i],frames:{width:i.width/2,height:i.height,regX:i.width/2/2,regY:i.height/2},animations:{state_true:[0],state_false:[1]}},d=new createjs.SpriteSheet(a);(l=createSprite(d,"state_"+(s=n),i.width/2/2,i.height/2,i.width/2,i.height)).x=e,l.y=t,l.stop(),c.addChild(l),this._initListener()},this.unload=function(){l.off("mousedown",this.buttonDown),l.off("pressup",this.buttonRelease),s_bMobile||l.off("mouseover",this.buttonOver),c.removeChild(l)},this._initListener=function(){l.on("mousedown",this.buttonDown),l.on("pressup",this.buttonRelease),s_bMobile||l.on("mouseover",this.buttonOver)},this.addEventListener=function(e,t,i){o[e]=t,r[e]=i},this.setActive=function(e){s=e,l.gotoAndStop("state_"+s)},this.buttonRelease=function(){l.scaleX=1,l.scaleY=1,playSound("click",1,0),s=!s,l.gotoAndStop("state_"+s),o[ON_MOUSE_UP]&&o[ON_MOUSE_UP].call(r[ON_MOUSE_UP],s)},this.buttonDown=function(){l.scaleX=.9,l.scaleY=.9,o[ON_MOUSE_DOWN]&&o[ON_MOUSE_DOWN].call(r[ON_MOUSE_DOWN])},this.buttonOver=function(e){s_bMobile||(e.target.cursor="pointer")},this.setPosition=function(e,t){l.x=e,l.y=t},c=a,this._init(e,t,i,n)}function CMenu(){var e,t,i,n,a,s,o,r,l,c=null,d=null;this._init=function(){a=createBitmap(s_oSpriteLibrary.getSprite("bg_menu")),s_oStage.addChild(a),t={x:CANVAS_WIDTH/2,y:CANVAS_HEIGHT-70};var _=s_oSpriteLibrary.getSprite("but_credits");i={x:_.width/2+10,y:_.height/2+40},(s=new CGfxButton(i.x,i.y,_,s_oStage)).addEventListener(ON_MOUSE_UP,this._onButCreditsRelease,this);var h=new createjs.Text("ලෝකසූරයන්","30px "+FONT_GAME,"#ffffff"),u=h.getBounds();h.x=CANVAS_WIDTH/2+375,h.y=200,h.textBaseline="alphabetic",h.shadow=new createjs.Shadow("#000000",5,5,10),h.scale=2,s_oStage.addChild(h);for(var p=250,S=0;S<14;S++){g=s_oSpriteLibrary.getSprite("player_name");new CTextButton(CANVAS_WIDTH/2+400,p,g,"Player "+S,FONT_GAME,"White","18",s_oStage);g=s_oSpriteLibrary.getSprite("score_bg");new CTextButton(CANVAS_WIDTH/2+650,p,g,parseInt(100*Math.random())+"/"+parseInt(10*Math.random()),FONT_GAME,"White","18",s_oStage),p+=50}if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile){var g=s_oSpriteLibrary.getSprite("audio_icon");e={x:CANVAS_WIDTH-g.height/2-20,y:g.height/2+40},(o=new CToggle(e.x,e.y,g,s_bAudioActive,s_oStage)).addEventListener(ON_MOUSE_UP,this._onAudioToggle,this),n={x:e.x-g.width/2-20,y:g.height/2+40}}else n={x:CANVAS_WIDTH-g.height/2-20,y:g.height/2+40};var f=window.document,m=f.documentElement;c=m.requestFullscreen||m.mozRequestFullScreen||m.webkitRequestFullScreen||m.msRequestFullscreen,d=f.exitFullscreen||f.mozCancelFullScreen||f.webkitExitFullscreen||f.msExitFullscreen,!1===ENABLE_FULLSCREEN&&(c=!1),c&&!1===inIframe()&&(g=s_oSpriteLibrary.getSprite("but_fullscreen"),(l=new CToggle(n.x,n.y,g,s_bFullscreen,s_oStage)).addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this)),(r=new createjs.Shape).graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT),s_oStage.addChild(r),createjs.Tween.get(r).to({alpha:0},1e3).call(function(){r.visible=!1});var T=new createjs.Bitmap("sprites/flag-lk.png");T.x=CANVAS_WIDTH/2-100,T.y=200,T.on("click",this._onButPlayRelease,this,!1,"lk"),s_oStage.addChild(T),(T=new createjs.Bitmap("sprites/flag-pk.png")).x=CANVAS_WIDTH/2-100,T.y=350,T.on("click",this._onButPlayRelease,this,!1,"pk"),s_oStage.addChild(T),(T=new createjs.Bitmap("sprites/flag-bd.png")).x=CANVAS_WIDTH/2-100,T.y=500,T.on("click",this._onButPlayRelease,this,"bd"),s_oStage.addChild(T),(T=new createjs.Bitmap("sprites/flag-in.png")).x=CANVAS_WIDTH/2-100,T.y=650,T.on("click",this._onButPlayRelease,this,"in"),s_oStage.addChild(T),(T=new createjs.Bitmap("sprites/flag-all.png")).x=CANVAS_WIDTH/2-100,T.y=800,T.on("click",this._onButPlayRelease,this,!1,"all"),s_oStage.addChild(T);u=(h=new createjs.Text("කන්ඩායම තොරාගන්න","60px "+FONT_GAME,"#ffffff")).getBounds();h.x=CANVAS_WIDTH/2-u.width/2,h.y=100,h.textBaseline="alphabetic",h.shadow=new createjs.Shadow("#000000",5,5,10),h.scale=2,s_oStage.addChild(h);u=(h=new createjs.Text("පිටුව ප්‍රකාශකය ෝ සියලුම හිමිකම් සහිතයි 2018","20px "+FONT_GAME,"#ffffff")).getBounds();h.x=CANVAS_WIDTH/2-u.width/2,h.y=CANVAS_HEIGHT-50,h.textBaseline="alphabetic",h.shadow=new createjs.Shadow("#000000",5,5,10),h.scale=2,s_oStage.addChild(h),(T=new createjs.Bitmap("sprites/logo.png")).x=20,T.y=CANVAS_HEIGHT-150,T.addEventListener("click",function(){return new CCredits,!0}),s_oStage.addChild(T);var A=new createjs.Shape;A.set({alpha:.5}),A.graphics.beginFill("#acbade").drawRect(150,200,500,700),s_oStage.addChild(A);u=(h=new createjs.Text("ක්‍රිකටි ක්‍රිඩාව සහ මතකය \nක්‍රිඩා දෙක ආශ්‍රිතව සැකසූ \nනිර්මාණයකි. \n\n\n\nපරිගණකයේ, ජංගම දුරකතන \nසහ ටැබි යන සියල්ලෙන්ම \nවිනදය ලැබිය හැක\n\n\n\nදකුණු පස කොඩිමගින් ඔබට \nකැමති කණ්ඩායම තොරාගන්න ","35px "+FONT_GAME,"#ffffff")).getBounds();h.x=170,h.y=250,h.textBaseline="alphabetic",h.shadow=new createjs.Shadow("#000000",5,5,10),h.scale=2,s_oStage.addChild(h);var E=s_oSpriteLibrary.getSprite("playStore"),w={x:CANVAS_WIDTH-E.width,y:CANVAS_HEIGHT-E.height};new CGfxButton(w.x,w.y,E,s_oStage).addEventListener(ON_MOUSE_DOWN,function(){document.location.href=PLAY_STORE_URL},this)},this.unload=function(){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||(o.unload(),o=null),c&&!1===inIframe()&&l.unload(),s_oStage.removeAllChildren()},this.refreshButtonPos=function(t,a){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||o.setPosition(e.x-t,a+e.y),c&&!1===inIframe()&&l.setPosition(n.x-t,n.y+a),s.setPosition(i.x+t,i.y+a)},this._onButPlayRelease=function(e,t){this.unload(),selectedTeam=t,$(s_oMain).trigger("start_session"),s_oMain.gotoGame(),s_oMenu=null},this._onButCreditsRelease=function(){new CCredits},this._onAudioToggle=function(){Howler.mute(s_bAudioActive),s_bAudioActive=!s_bAudioActive},this._onFullscreenRelease=function(){s_bFullscreen?(d.call(window.document),s_bFullscreen=!1):(c.call(window.document.documentElement),s_bFullscreen=!0),sizeHandler()},s_oMenu=this,this._init()}function CGame(e){var t,i,n,a,s,o,r,l,c,d=!0,_=4,h=0,u=0,p=0,S=0,g=0,f=0,m=[];this._init=function(){console.log("in game"),console.log(selectedTeam);var e={images:[s_oSpriteLibrary.getSprite("card_"+selectedTeam)],frames:{width:CARD_WIDTH,height:CARD_HEIGHT,regX:CARD_WIDTH/2,regY:CARD_HEIGHT/2},animations:{card0:[0],card1:[1],card2:[2],card3:[3],card4:[4],card5:[5],card6:[6],card7:[7],card8:[9],card9:[10],card10:[11],card11:[12],card12:[13],card13:[14],card14:[15],card15:[16],back:[17]}};this.spriteSheet=new createjs.SpriteSheet(e),a=new createjs.Container,s_oStage.addChild(a),c=new createjs.Container,s_oStage.addChild(c),s=new CInterface(formatTime(t)),o=new CNextLevel,r=new CGameOver,l=new CVictory,this.nextLevel()},this.unload=function(e){for(var t=0;t<m.length;t++)m[t].unload();s_oStage.removeAllChildren(),s.unload(),e&&$(s_oMain).trigger("end_level",h),$(s_oMain).trigger("end_session"),$(s_oMain).trigger("share_event",p),s_oMain.gotoMenu()},this.cardClicked=function(e,t){!0===e.isFolded()&&!1===d&&u<2&&e.flipCard()},this.addFlippedCard=function(){2===++u&&!1===d&&(balls++,s.refreshBalls(this.oversFormat()),this.checkMatching())},this.oversFormat=function(){return parseInt(balls/6)+"."+parseInt(balls%6)},this.checkMatching=function(){for(var e=[],a=[],o=0;o<_;o++)!1===m[o].isFolded()&&(a.push(m[o].getType()),e.push(o));if(a[0]===a[1]){var l=1;if(i<TIME_FOR_MATCH_MULT?(i=0,s.showMultiplier(n),l=n,n++):(n=2,i=0),playSound("right",1,!1),m[e[0]].eliminateCard(),m[e[1]].eliminateCard(),m.splice(e[0],1),m.splice(e[1]-1,1),_-=2,p+=SCORE_MATCH_CARD*l,g+=SCORE_MATCH_CARD*l,s.refreshScore(p+"/"+S),0===_&&h<=s_aCardsPerLevel.length){d=!0;var c=this;setTimeout(function(){c.checkVictory()},1e3)}}else{var f=m[e[0]].incorrect();m[e[0]].flipCard(),m[e[0]].clickListener();var T=m[e[1]].incorrect();m[e[1]].flipCard(),m[e[1]].clickListener(),(f>=3||T>=3)&&(S++,s.refreshScore(p+"/"+S),playSound("win",1,!1)),10==S&&(d=!0,t=0,playSound("game_over",1,!1),r.display(p),h=1)}u=0},this.checkVictory=function(){d=!0,f=Math.round(t/1e3*SCORE_TIME_LEFT_MULT),p+=f,s.refreshScore(p+"/"+S),$(s_oMain).trigger("end_level",h),h<s_aCardsPerLevel.length?(playSound("next_level",1,!1),o.display(g,f,this.oversFormat(),p+"/"+S,h)):(playSound("win",1,!1),l.display(p))},this.nextLevel=function(){h++,$(s_oMain).trigger("start_level",h),a.removeAllChildren();var e=createBitmap(s_oSpriteLibrary.getSprite("bg_"+(Math.floor(Math.random()*NUM_BACKGROUNDS)+1)));a.addChild(e);var s=CLevels(h);_=s.cardsNum,t=s.timeAllotted,i=TIME_FOR_MATCH_MULT;for(var o=[],r=0;r<_/2;r++)o[r]=r,o[r+_/2]=r;for(r=0;r<_;r++){var l=Math.floor(Math.random()*o.length),u="card"+o[l];m[r]=new CCard(s.cardsPos[r][0],s.cardsPos[r][1],u,s.cardZoomFactor,c),o.splice(l,1)}g=0,f=0,_iGameOverScore=0,n=2,d=!1},this.suspendUpdates=function(){d=!0},this.restartUpdates=function(){_>0&&(d=!1)},this.update=function(){d||(i+=s_iTimeElaps,(t-=s_iTimeElaps)<0?(d=!0,t=0,playSound("game_over",1,!1),r.display(p),h=1):s.update(formatTime(t)))},this.spriteSheet={},s_oGame=this,SCORE_MATCH_CARD=e.score_match_card,SCORE_TIME_LEFT_MULT=e.score_time_left_mult,TIME_FOR_MATCH_MULT=e.time_match_mult,s_aCardsPerLevel=e.card_per_level,s_aSecsPerLevel=e.time_level,TIME_SHOW_CARDS=1e3*e.show_cards,ENABLE_FULLSCREEN=e.fullscreen,this._init()}function CCard(e,t,i,n,a){var s,o,r,l,c,d,_,h,u=!1,p=0;this.incorrect=function(){return++p},this._init=function(e,t,i,n,a){r=e,l=t,_bEliminated=!1,s=!0,o=i,h=a,(d=createSprite(s_oGame.spriteSheet,"back",CARD_WIDTH/2,CARD_HEIGHT/2,CARD_WIDTH,CARD_HEIGHT)).x=r<CANVAS_WIDTH/2?r-CANVAS_WIDTH:CANVAS_WIDTH+r,d.y=l+Math.floor(0*(Math.random()-.5)),c=n,d.scaleX=d.scaleY=c,_=this,d.cursor="pointer",d.on("click",function(){this.clicked()},_),u=!0,s_oGame.suspendUpdates(),h.addChild(d);var p=this;createjs.Tween.get(d).to({alpha:1,x:r,y:l},500).call(function(){u=!1,s_oGame.restartUpdates(),TIME_SHOW_CARDS>0&&p.showCardFirstTime()})},this.unload=function(){h.removeChild(d)},this.update=function(){},this.clicked=function(){!1===u&&s&&(s_oGame.cardClicked(this,o),playSound("card",1,!1),this.clickListener())},this.showCardFirstTime=function(){u=!0,createjs.Tween.get(d).to({scaleX:.1},100).call(function(){h.removeChild(d),(d=createSprite(s_oGame.spriteSheet,o,CARD_WIDTH/2,CARD_HEIGHT/2,CARD_WIDTH,CARD_HEIGHT)).x=r,d.y=l,d.scaleX=d.scaleY=c,h.addChild(d),createjs.Tween.get(d).wait(TIME_SHOW_CARDS).to({scaleX:c},100).call(function(){u=!1,s=!1,_.clickListener(),_.flipCard()},_)})},this.flipCard=function(){!0===s?(u=!0,createjs.Tween.get(d).to({scaleX:.1},100).call(function(){h.removeChild(d),(d=createSprite(s_oGame.spriteSheet,o,CARD_WIDTH/2,CARD_HEIGHT/2,CARD_WIDTH,CARD_HEIGHT)).x=r,d.y=l,d.scaleX=d.scaleY=c,h.addChild(d),createjs.Tween.get(d).to({scaleX:c},100).call(function(){u=!1,s=!1,s_oGame.addFlippedCard(),_.clickListener()},_)})):(playSound("card",1,!1),u=!0,createjs.Tween.get(d).to({scaleX:.1},100).call(function(){h.removeChild(d),(d=createSprite(s_oGame.spriteSheet,"back",CARD_WIDTH/2,CARD_HEIGHT/2,CARD_WIDTH,CARD_HEIGHT)).x=r,d.y=l,d.scaleX=d.scaleY=c,h.addChild(d),createjs.Tween.get(d).to({scaleX:c},100).call(function(){return u=!1,s_oGame.restartUpdates(),s=!0,_.clickListener(),!0},_)}))},this.clickListener=function(){!1===u&&d.on("click",function(){this.clicked()},_)},this.display=function(){},this.isFolded=function(){return s},this.getType=function(){return o},this.eliminateCard=function(){u=!0,s_oGame.suspendUpdates(),d.alpha=1,createjs.Tween.get(d).to({alpha:0},400).call(function(){h.removeChild(d),u=!1,s_oGame.restartUpdates()})},this._init(e,t,i,n,a)}function CNextLevel(){var e,t,i,n,a;this._init=function(){(a=new createjs.Container).alpha=0,a.visible=!1,s_oStage.addChild(a);var s=createBitmap(s_oSpriteLibrary.getSprite("msg_box"));(e=new createjs.Text(TEXT_LEVELCOMPLETED,"48px "+FONT_GAME,"#fff")).x=CANVAS_WIDTH/2,e.y=CANVAS_HEIGHT/2-80,e.textBaseline="alphabetic",e.textAlign="center",e.shadow=new createjs.Shadow("#000000",3,3,2),(i=new createjs.Text(TEXT_LEVEL_SCORE,"34px "+FONT_GAME,"#fff")).x=CANVAS_WIDTH/2,i.y=CANVAS_HEIGHT/2+50,i.textAlign="center",i.textBaseline="alphabetic",i.shadow=new createjs.Shadow("#000000",2,2,2),(t=new createjs.Text(TEXT_TOTALSCORE,"48px "+FONT_GAME,"#fff")).x=CANVAS_WIDTH/2,t.y=CANVAS_HEIGHT/2+120,t.textAlign="center",t.textBaseline="alphabetic",t.shadow=new createjs.Shadow("#000000",2,2,2),a.addChild(s,e,void 0,void 0,i,t),(n=new CTextButton(CANVAS_WIDTH/2,770,s_oSpriteLibrary.getSprite("but_menu_bg"),"CONTINUE",FONT_GAME,"White","24",a)).addEventListener(ON_MOUSE_UP,this.hide,this)},this.display=function(e,n,s,o,r){i.text=TEXT_LEVEL_SCORE+" = "+s,t.text=TEXT_TOTALSCORE+" "+o,a.visible=!0,createjs.Tween.get(a).to({alpha:1},250)},this.hide=function(){a.alpha=0,a.visible=!1,s_oGame.nextLevel()},this.unload=function(){n.unload(),s_oStage.removeChild(a)},this._init()}function CInterface(e){var t,i,n,a,s,o,r,l,c,d,_,h,u,p=null,S=null;return this._init=function(e){a={x:30,y:75},d=TEXT_TIMELEFT+e,(r=new createjs.Text(d,"36px "+FONT_GAME,"#fff")).x=a.x,r.y=a.y,r.textBaseline="alphabetic",r.shadow=new createjs.Shadow("#000000",2,2,2),s_oStage.addChild(r),(o=new createjs.Text(TEXT_OVERS+" 0.0","39px "+FONT_GAME,"#fff")).x=30,o.y=180,o.textAlign="left",o.textBaseline="alphabetic",o.shadow=new createjs.Shadow("#000000",2,2,2),s_oStage.addChild(o),n={x:CANVAS_WIDTH/2,y:75},_szScore=TEXT_SCORE+0+"/0",(l=new createjs.Text(_szScore,"36px "+FONT_GAME,"#fff")).x=n.x,l.y=n.y,l.textAlign="center",l.textBaseline="alphabetic",l.shadow=new createjs.Shadow("#000000",2,2,2),s_oStage.addChild(l),(h=new createjs.Text("X2","150px "+FONT_GAME,"#fff")).textAlign="center",h.textBaseline="alphabetic",h.x=CANVAS_WIDTH/2,h.y=CANVAS_HEIGHT/2,h.shadow=new createjs.Shadow("#000000",2,2,2),h.scaleX=h.scaleY=.1,h.visible=!1,s_oStage.addChild(h);var g=s_oSpriteLibrary.getSprite("but_exit");t={x:CANVAS_WIDTH-g.width/2-20,y:g.height/2+20};var f=s_oSpriteLibrary.getSprite("audio_icon");i={x:CANVAS_WIDTH-f.width/2*2-10,y:f.height/2+20};var m=s_oSpriteLibrary.getSprite("playStore"),T={x:CANVAS_WIDTH-m.width,y:CANVAS_HEIGHT-m.height};new CGfxButton(T.x,T.y,m,s_oStage).addEventListener(ON_MOUSE_DOWN,function(){document.location.href=PLAY_STORE_URL},this),(_=new CGfxButton(t.x,t.y,g,s_oStage)).addEventListener(ON_MOUSE_UP,this._onExit,this),!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?((c=new CToggle(i.x,i.y,f,s_bAudioActive,s_oStage)).addEventListener(ON_MOUSE_UP,this._onAudioToggle,this),s={x:i.x-g.width-20,y:i.y}):s={x:t.x-g.width-20,y:t.y};var A=window.document,E=A.documentElement;if(p=E.requestFullscreen||E.mozRequestFullScreen||E.webkitRequestFullScreen||E.msRequestFullscreen,S=A.exitFullscreen||A.mozCancelFullScreen||A.webkitExitFullscreen||A.msExitFullscreen,!1===ENABLE_FULLSCREEN&&(p=!1),p&&!1===inIframe()){var w=s_oSpriteLibrary.getSprite("but_fullscreen");(u=new CToggle(s.x,s.y,w,s_bFullscreen,s_oStage)).addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this)}this.refreshButtonPos(s_iOffsetX,s_iOffsetY)},this.refreshButtonPos=function(e,o){l.y=n.y+o,r.x=a.x+e,r.y=a.y+o,_.setPosition(t.x-e,o+t.y),!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||c.setPosition(i.x-e,o+i.y),p&&!1===inIframe()&&u.setPosition(s.x-e,s.y+o)},this.unload=function(){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||c.unload(),p&&!1===inIframe()&&u.unload(),_.unload(),s_oStage.removeChild(r),s_oStage.removeChild(l),s_oInterface=null},this.refreshBalls=function(e){console.log("balls received "+e),o.text=TEXT_OVERS+" "+e},this.refreshScore=function(e){l.text=TEXT_SCORE+e},this.showMultiplier=function(e){h.text="X"+e,h.visible=!0,createjs.Tween.get(h).to({scaleX:1,scaleY:1},300,createjs.Ease.cubicOut).call(function(){createjs.Tween.get(h).to({scaleX:.1,scaleY:.1},300,createjs.Ease.cubicIn).call(function(){h.visible=!1})})},this._openPlayStore=function(){document.location.href="https://play.google.com/store/apps/details?id=lk.pituwa.cricket"},this.updateBalls=function(e){},this.update=function(e){r.text=TEXT_TIMELEFT+e},this._onExit=function(){s_oGame.unload(!0)},this._onAudioToggle=function(){Howler.mute(s_bAudioActive),s_bAudioActive=!s_bAudioActive},this._onFullscreenRelease=function(){s_bFullscreen?(S.call(window.document),s_bFullscreen=!1):(p.call(window.document.documentElement),s_bFullscreen=!0),sizeHandler()},s_oInterface=this,this._init(e),this}function CGameOver(){var e,t,i,n,a,s;this._init=function(){(n=new createjs.Container).alpha=0,n.visible=!1,s_oStage.addChild(n),a=createBitmap(s_oSpriteLibrary.getSprite("msg_box")),s=a.on("click",function(){}),(e=new createjs.Text(TEXT_GAMEOVER,"50px "+FONT_GAME,"#fff")).x=CANVAS_WIDTH/2,e.y=CANVAS_HEIGHT/2-80,e.textBaseline="alphabetic",e.textAlign="center",e.shadow=new createjs.Shadow("#000000",3,3,2),(t=new createjs.Text(TEXT_TOTALSCORE+" 0","48px "+FONT_GAME,"#fff")).x=CANVAS_WIDTH/2,t.y=CANVAS_HEIGHT/2+50,t.textAlign="center",t.textBaseline="alphabetic",t.shadow=new createjs.Shadow("#000000",2,2,2),n.addChild(a,e,t),(i=new CTextButton(CANVAS_WIDTH/2,670,s_oSpriteLibrary.getSprite("but_menu_bg"),TEXT_PLAY_AGAIN,FONT_GAME,"White","24",n)).addEventListener(ON_MOUSE_UP,this.unload,this)},this.display=function(e){t.text=TEXT_TOTALSCORE+" "+e,n.visible=!0,createjs.Tween.get(n).to({alpha:1},250).call(function(){$(s_oMain).trigger("show_interlevel_ad")}),$(s_oMain).trigger("save_score",e)},this.unload=function(){a.on("click",s),i.unload(),s_oStage.removeChild(n),s_oGame.unload(!1)},this._init()}function CCredits(){var e,t,i,n,a,s;this._init=function(){e=new createjs.Container,s_oStage.addChild(e);l=s_oSpriteLibrary.getSprite("msg_box");n=createBitmap(l),a=n.on("mousedown",this._onLogoButRelease),n.regX=l.width/2,n.regY=l.height/2,e.addChild(n),e.x=CANVAS_WIDTH/2,e.y=CANVAS_HEIGHT/2,s={x:e.x,y:e.y};var o=new createjs.Text(TEXT_DEVELOPED," 30px "+FONT_GAME,"#ffffff");o.y=-80,o.textAlign="center",o.textBaseline="middle",o.lineWidth=300,e.addChild(o);var r=new createjs.Text("www.pituwa.co"," 34px "+FONT_GAME,"#ffffff");r.y=70,r.textAlign="center",r.textBaseline="middle",r.lineWidth=300,e.addChild(r);l=s_oSpriteLibrary.getSprite("logo_ctl");(i=createBitmap(l)).regX=l.width/2,i.regY=l.height/2,e.addChild(i);var l=s_oSpriteLibrary.getSprite("but_exit");(t=new CGfxButton(240,-120,l,e)).addEventListener(ON_MOUSE_UP,this.unload,this)},this.unload=function(){t.setClickable(!1),s_oStage.removeChild(e),t.unload(),n.on("mousedown",a)},this._onLogoButRelease=function(){window.open("http://www.pituwa.co/")},this._onMoreGamesReleased=function(){window.open("http://www.pituwa.co")},this._init()}function CVictory(){var e,t,i,n;this._init=function(){(n=new createjs.Container).alpha=0,n.visible=!1,s_oStage.addChild(n);var a=createBitmap(s_oSpriteLibrary.getSprite("msg_box"));(t=new createjs.Text(TEXT_VICTORY,"38px "+FONT_GAME,"#fff")).x=CANVAS_WIDTH/2,t.y=CANVAS_HEIGHT/2-80,t.textBaseline="alphabetic",t.textAlign="center",t.shadow=new createjs.Shadow("#000000",3,3,2),(i=new createjs.Text(TEXT_TOTALSCORE,"48px "+FONT_GAME,"#fff")).x=CANVAS_WIDTH/2+2,i.y=CANVAS_HEIGHT/2,i.textAlign="center",i.textBaseline="alphabetic",i.shadow=new createjs.Shadow("#000000",2,2,2),n.addChild(a,t,i),(e=new CTextButton(CANVAS_WIDTH/2,670,s_oSpriteLibrary.getSprite("but_menu_bg"),TEXT_PLAY_AGAIN,FONT_GAME,"White","24",n)).addEventListener(ON_MOUSE_DOWN,this.unload,this)},this.display=function(e){i.text=TEXT_TOTALSCORE+"\n"+e,n.visible=!0,createjs.Tween.get(n).to({alpha:1},250).call(function(){$(s_oMain).trigger("show_interlevel_ad")}),$(s_oMain).trigger("save_score",e)},this.unload=function(){e.unload(),s_oStage.removeChild(n),s_oGame.unload(!1)},this._init()}var s_iScaleFactor=1,s_bIsIphone=!1,s_oCanvasLeft,s_oCanvasTop,s_iOffsetX,s_iOffsetY;!function(e){(jQuery.browser=jQuery.browser||{}).mobile=/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera),$(window).resize(function(){sizeHandler()}),window.addEventListener("orientationchange",onOrientationChange),NoClickDelay.prototype={handleEvent:function(e){switch(e.type){case"touchstart":this.onTouchStart(e);break;case"touchmove":this.onTouchMove(e);break;case"touchend":this.onTouchEnd(e)}},onTouchStart:function(e){e.preventDefault(),this.moved=!1,this.element.addEventListener("touchmove",this,!1),this.element.addEventListener("touchend",this,!1)},onTouchMove:function(e){this.moved=!0},onTouchEnd:function(e){if(this.element.removeEventListener("touchmove",this,!1),this.element.removeEventListener("touchend",this,!1),!this.moved){var t=document.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY);3==t.nodeType&&(t=t.parentNode);var i=document.createEvent("MouseEvents");i.initEvent("click",!0,!0),t.dispatchEvent(i)}}},function(){function e(e){var i="visible",n="hidden",a={focus:i,focusin:i,pageshow:i,blur:n,focusout:n,pagehide:n};(e=e||window.event).type in a?document.body.className=a[e.type]:(document.body.className=this[t]?"hidden":"visible","hidden"===document.body.className?s_oMain.stopUpdate():s_oMain.startUpdate())}var t="hidden";t in document?document.addEventListener("visibilitychange",e):(t="mozHidden")in document?document.addEventListener("mozvisibilitychange",e):(t="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",e):(t="msHidden")in document?document.addEventListener("msvisibilitychange",e):"onfocusin"in document?document.onfocusin=document.onfocusout=e:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=e}();var CANVAS_WIDTH=1920,CANVAS_HEIGHT=1080,PLAY_STORE_URL="https://play.google.com/store/apps/details?id=lk.pituwa.memory",EDGEBOARD_X=220,EDGEBOARD_Y=220,DISABLE_SOUND_MOBILE=!1,FONT_GAME="walibi0615bold",STATE_LOADING=0,STATE_MENU=1,STATE_HELP=1,STATE_GAME=3,ON_MOUSE_DOWN=0,ON_MOUSE_UP=1,ON_MOUSE_OVER=2,ON_MOUSE_OUT=3,ON_DRAG_START=4,ON_DRAG_END=5,CARD_WIDTH=160,CARD_HEIGHT=252,MAX_CARDS=50,SCORE_MATCH_CARD,SCORE_TIME_LEFT_MULT,TIME_FOR_MATCH_MULT,NUM_BACKGROUNDS=8,TIME_SHOW_CARDS,ENABLE_FULLSCREEN,ENABLE_CHECK_ORIENTATION;TEXT_GAMEOVER="අවසන්",TEXT_PLAY="පටංගමු",TEXT_LEVEL_SCORE="ඔවර",TEXT_LEVELCOMPLETED="මද විරාම",TEXT_TIMELEFT="කාලසීමාව ",TEXT_SCORE="ලකුණු ",TEXT_MATCH_SCORE="ලකුණු සම තත්වයක",TEXT_TIMEBONUS="කාලලකුණු",TEXT_TOTALSCORE="මුලු ලකුණු",TEXT_VICTORY="ඔබ දනුම්",TEXT_PLAY_AGAIN="නැවත",TEXT_DEVELOPED="නිෂ්පාදණය",TEXT_OVERS="ඔවර්",TEXT_SHARE_IMAGE="200x200.jpg",TEXT_SHARE_TITLE="මම දිනුම්!",TEXT_SHARE_MSG1="ඔබ ර්ස්කර ලකුණු <strong>",TEXT_SHARE_MSG2=" </strong>!<br><br>මිත්රන් අතරේ බෙදාගන්න!",TEXT_SHARE_SHARE1="මගේ ලකුණු ",TEXT_SHARE_SHARE2=" ඔයාට මාව පරද්දන්න පුලුවන්ද?";var s_bMobile,s_bAudioActive=!0,s_iCntTime=0,s_iTimeElaps=0,s_iPrevTime=0,s_iCntFps=0,s_iCurFps=0,s_oDrawLayer,s_oStage,s_oMain,s_oSpriteLibrary,s_oGameSettings,s_bFullscreen=!1,s_aSounds,s_oMenu=null,selectedTeam=1,s_aCardsPerLevel,s_aSecsPerLevel,s_oGame,balls=0,CLevels=function(){var e=CARD_HEIGHT/2+.2*CANVAS_HEIGHT,t=CANVAS_WIDTH/2,i=(CANVAS_HEIGHT-e)/2+e,n=CANVAS_HEIGHT-e;return function(a){var s=s_aCardsPerLevel[a-1];s>MAX_CARDS&&(s=MAX_CARDS);for(var o={cardZoomFactor:1,cardsNum:s,cardsPos:[],timeAllotted:1e3*s_aSecsPerLevel[a-1]},r=1;r>=.1;r-=.01)for(var l=2;l<=6;l+=1){var c=s/l;if(c*(CARD_WIDTH*r+30*r)<=CANVAS_WIDTH&&l*(CARD_HEIGHT*r+30*r)<=n&&s%l==0){for(var d=t-(c-1)*(CARD_WIDTH*r+30*r)*.5,_=i-(e+.5*((CARD_HEIGHT*r+30*r)*(l-1)+e)),h=0;h<l;h++)for(var u=0;u<c;u++)o.cardsPos[h*c+u]=[d+(CARD_WIDTH*r+30*r)*u,_+e+(CARD_HEIGHT*r+30*r)*h];return o.cardZoomFactor=r,o}}}}(),s_oInterface=null;